
### Простой чат-бот на WPF с поддержкой базовых команд и сохранением истории.

---

todo:
1. Сделать чтобы бот принимал строки вида: "231 - 123" - REARY
2. Убрать диалоговое окно при ошибки ввода имени - READY
3. Сделать два интерфейса(для истории и для обработки сообщений) - READY
4. Добавить UML - READY
5. Исправить отображение статистики чата(бот не запоминает сколько сообщений от пользователя в чате) - READY
6. Сделать MessageBox для ошибок при чтении/записи в файл json - READY
7. Добавить привествие при пустой истории чата - READY

---

## Возможности

- Приветствия и прощания
- Вопросы о времени и дате
- Арифметические операции (сложение, вычитание, умножение, деление)
- Статистика общения
- Сохранение истории чата в JSON

---

## Примеры команд

| Команда | Пример | Ответ |
|---------|--------|-------|
| Приветствие | `привет` | Привет, Имя! |
| Прощание | `пока` | Пока, Имя. До встречи! |
| Время | `который час?` | Сейчас 14:30:00 |
| Дата | `какое сегодня число` | Сегодня 25 января 2026 года |
| Сложение | `сложи 10 и 5 / 10 + 5` | Результат: 15 |
| Вычитание | `вычти 8 из 20 / 20 - 8` | Результат: 12 |
| Умножение | `умножь 7 на 3 / 7 * 3` | Результат: 21 |
| Деление | `раздели 100 на 4 /  100 / 4` | Результат: 25 |
| Статистика | `статистика` | Всего сообщений: 10... |

---

## Структура проекта

1. ChatBot.cs - Основной рабочий класс чат-бота. Содержит всю логику: хранение сообщений в памяти, распознавание шаблонов и команд через регулярные выражения, арифметические операции, работу с JSON-файломю.
2. Message.cs - Простая модель (класс-сущность) для одного сообщения в чате: время отправки, автор и текст. Есть два конструктора - обычный и для десериализации из JSON.
3. IMessageHistory.cs - Интерфейс, который определяет контракт только для работы с историей сообщений (получение списка, добавление сообщения, загрузка и сохранение в файл).
4. IMessageProcessor.cs - Интерфейс, который определяет только один метод - обработку входящего сообщения пользователя и генерацию ответа бота.
5. LoginWindow.xaml - Разметка (UI) окна ввода имени - Label, TextBox, TextBlock для ошибки и Button.
6. LoginWindow.xaml.cs-  Логика окна авторизации - проверка ввода имени, показ/скрытие ошибки под полем, сохранение имени в App.UserName, открытие главного окна и закрытие текущего.
7. MainWindow.xaml - Разметка главного окна чата - ListBox для истории, TextBox для ввода сообщения, Button для отправки.
8. MainWindow.xaml.cs - Логика главного окна - создание бота, загрузка истории, отправка сообщений, получение ответов, обновление ListBox, сохранение при закрытии. Использует интерфейсы IMessageHistory.cs и IMessageProcessor.cs.

## Отношения между классами

- ChatBot -> IMessageHistory - реализация
- ChatBot -> IMessageProcessor - реализация
- ChatBot -> Message - композиция (ChatBot содержит много Message)
- MainWindow -> IMessageHistory - использование / зависимость
- MainWindow -> IMessageProcessor - использование / зависимость
- MainWindow -> App - использование / зависимость (читает UserName)
- LoginWindow -> App - использование / зависимость (устанавливает UserName)
- LoginWindow -> MainWindow - создание (создаёт и показывает)
- App -> LoginWindow - создание (запускает первым)