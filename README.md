# Простой чат-бот на WPF

Чат-бот с графическим интерфейсом на WPF, поддержкой базовых команд, статистикой общения и сохранением истории в JSON-файл.

## Возможности

- Окно ввода имени при запуске
- Персонализированные ответы (знает имя пользователя)
- Шаблонные реплики: приветствия, прощания, «как дела»
- Простые команды: время, дата, статистика
- Арифметические операции в двух форматах:
  - «умножь 12 на 157»
  - «321 - 123» (прямые выражения)
- Сохранение и загрузка истории чата
- Приветственное сообщение при первом запуске
- Красивая обработка ошибок без раздражающих MessageBox

## Примеры команд

| Команда              | Пример ввода              | Пример ответа                          |
|----------------------|---------------------------|----------------------------------------|
| Приветствие          | `привет`, `hi`, `добрый день` | `Привет, Данил!`                      |
| Прощание             | `пока`, `до свидания`     | `Пока, Данил. До встречи!`            |
| Время                | `который час?`            | `Сейчас 14:35:22`                     |
| Дата                 | `какое сегодня число`     | `Сегодня 02 февраля 2026 года`        |
| Статистика           | `статистика`              | `Всего сообщений: 15. От пользователя: 8. От бота: 7.` |
| Умножение            | `умножь 12 на 157`        | `Результат: 1884`                     |
| Прямое выражение     | `321 - 123`               | `Результат: 198`                      |
| Деление на ноль      | `100 / 0`                 | `На ноль делить нельзя!`              |

## Структура проекта

```text
ChatBotLab/
├── App.xaml                    # Входная точка приложения
├── App.xaml.cs                 # Запуск окна логина + глобальное имя пользователя
├── ChatBot.cs                  # Основная логика бота (реализует два интерфейса)
├── Message.cs                  # Модель одного сообщения (время, автор, текст)
├── IMessageHistory.cs          # Интерфейс для работы с историей сообщений
├── IMessageProcessor.cs        # Интерфейс для обработки и генерации ответов
├── LoginWindow.xaml            # Окно ввода имени (UI)
├── LoginWindow.xaml.cs         # Логика авторизации (валидация без MessageBox)
├── MainWindow.xaml             # Главное окно чата (UI)
└── MainWindow.xaml.cs          # Логика чата (отправка, обновление, сохранение)
```

## Отношения между классами (UML)

- **ChatBot → IMessageHistory** = реализация  
- **ChatBot → IMessageProcessor** = реализация  
- **ChatBot → Message** = композиция (ChatBot содержит много Message)  
- **MainWindow → IMessageHistory** = использование / зависимость  
- **MainWindow → IMessageProcessor** = использование / зависимость  
- **MainWindow → App** = использование / зависимость (читает UserName)  
- **LoginWindow → App** = использование / зависимость (устанавливает UserName)  
- **LoginWindow → MainWindow** = создание (создаёт и показывает)  
- **App → LoginWindow** = создание (запускает первым)

## Статус выполнения задач

Все требования лабораторной выполнены и протестированы.

| №  | Задача                                                                 | Статус    | 
|----|------------------------------------------------------------------------|-----------|
| 1  | Бот принимает строки вида "231 - 123" (прямые арифметические выражения) | ✅ READY  | 
| 2  | Убрано диалоговое окно при ошибке ввода имени                          | ✅ READY  | 
| 3  | Сделаны два интерфейса: для истории и для обработки сообщений          | ✅ READY  | 
| 4  | Добавлена UML-диаграмма классов                                        | ✅ READY  | 
| 5  | Исправлена статистика чата (бот корректно считает сообщения)          | ✅ READY  | 
| 6  | MessageBox при ошибках чтения/записи в JSON-файл                      | ✅ READY  | 
| 7  | Приветствие от бота при пустой истории чата                            | ✅ READY  | 

